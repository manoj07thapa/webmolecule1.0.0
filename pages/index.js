import Head from "next/head";
import { Auth, withSSRContext } from "aws-amplify";
import { listCourses } from "../src/graphql/queries";

export default function Home({ ssgCourses }) {
  console.log("SSGDATA", ssgCourses);

  return (
    <div>
      <Head>
        <title>WebMolecule</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <div className="min-h-screen w-full bg-[url('/graph-paper.svg')] bg-cover ">
        <div className="max-w-7xl mx-auto px-6">
          <h1>Web molecule</h1>
        </div>
        <button type="submit" onClick={() => Auth.signOut()}>
          Signout
        </button>
      </div>
    </div>
  );
}

export const getStaticProps = async (context) => {
  const SSR = withSSRContext();
  const { data } = await SSR.API.graphql({
    query: listCourses,
    authMode: "AWS_IAM",
  });

  return {
    props: {
      ssgCourses: data.listCourses.items,
    },
  };
};
